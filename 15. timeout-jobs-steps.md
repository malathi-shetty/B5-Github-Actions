## Why timeout is needed

By default, GitHub Actions will allow a job to run for up to 6 hours.
Sometimes, a step or job may hang due to:

Long running scripts, 
Network delays,
API calls stuck, 
Infinite loops, 
Commands waiting for input, 
Deployment scripts not ending, 
Slow build systems

If you do not add timeout, your workflow may waste many runner minutes.

Timeouts protect your pipelines and avoid unnecessary billing.

Timeout control happens at two levels:

1. Step level timeout
2. Job level timeout

---

1. Job Level Timeout

---

Job-level timeout applies to the entire job.
Meaning:
All steps inside that job must finish within the given time.

Syntax:

```
timeout-minutes: 5
```

If the job exceeds 5 minutes, GitHub Actions will stop it automatically.

Full example:

```
name: Job Timeout Example

on:
  workflow_dispatch:

jobs:
  sample:
    runs-on: ubuntu-latest
    timeout-minutes: 5

    steps:
      - name: Start
        run: echo "Job started"

      - name: Long sleep
        run: sleep 400

      - name: End
        run: echo "Job finished"
```

Explanation
sleep 400 means 400 seconds (almost 7 minutes).
job timeout is 5 minutes.
The job will stop before the sleep completes.

Use cases for job timeout
Prevent infinite loops
Stop long running workflows
Avoid wasted runner time
Limit maximum execution duration

---

2. Step Level Timeout

---

Step-level timeout applies only to a specific step.
Other steps are not affected.

Syntax:

```
timeout-minutes: 2
```

Example:

```
name: Step Timeout Example

on:
  workflow_dispatch:

jobs:
  demo:
    runs-on: ubuntu-latest

    steps:
      - name: This step has timeout
        timeout-minutes: 1
        run: sleep 90

      - name: This step runs normally
        run: echo "Next step running"
```

Explanation
sleep 90 is 90 seconds
timeout is 60 seconds
This step will stop after 1 minute
Next step will continue normally (only if previous step is not marked as failure or you use continue-on-error)

Use cases for step timeout
API calls
Deployment commands
Install commands
Database migrations
Network operations

---

## Which timeout is stronger

If both job-level and step-level timeouts exist:

Job-level timeout controls entire job
Step-level timeout controls individual step

If a step has 10 minutes timeout but the job has 5 minutes timeout:
Job will stop at 5 minutes.

Job-level timeout overrides everything.

---

## Default timeout behavior

GitHub default job timeout: 6 hours
GitHub default step timeout: no explicit limit, but limited by the job timeout

You can reduce timeout but cannot increase beyond GitHub limit.

---

## Real DevOps Example (Build timeout)

```
name: Build with Timeout

on:
  push:

jobs:
  build:
    runs-on: ubuntu-latest
    timeout-minutes: 15

    steps:
      - name: Run build with step timeout
        timeout-minutes: 10
        run: ./build.sh
```

Explanation
Build should complete within 15 minutes
The specific step must finish within 10 minutes

---

## Real DevOps Example (Deploy timeout)

```
name: Deployment Workflow

on:
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    timeout-minutes: 20

    steps:
      - name: Deployment script
        timeout-minutes: 15
        run: bash deploy.sh
```

Usage
Ensure deployment never hangs

---

## Common Mistakes

Adding timeout at wrong level
Forgetting that sleep commands must finish
Expecting step to continue after timeout
Thinking secrets or connections break due to timeout
Using huge timeouts unnecessarily
Not testing scripts before adding timeout

---

## One line summary

Timeouts prevent jobs and steps from running forever, helping control cost and avoid stuck pipelines.
